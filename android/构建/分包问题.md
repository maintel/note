
# D8: Cannot fit requested classes in the main-dex file (# methods: 67138 > 65536)

时间：2019年9月20日

已经进行了分包处理，但是主dex 还是过大的问题。

更加奇怪的是只有在服务器打包的时候出现这个问题，本地打包没事。

**解决方案：**

主要是因为升级到 gradle 3.2.0 以后默认的打包方式为 D8，打包的时候会把所有四大组件等全部打包在主 dex 中，然后这些组件依赖的类也就会打包到主 dex 中，从而导致主 dex 过大爆掉，目前不知道后续版本是否修复了这个问题，待验证，

解决办法是暂时将 gradle 降到 3.1.4，可以打包通过。